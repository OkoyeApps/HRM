@model resourceEdge.Domain.Entities.InterviewViewModel

@{
    ViewBag.Title = "EditInterview";
    Layout = "~/Views/Shared/Layouts/_HrLayout.cshtml";
    var aa = Model.InterviewTime;
}
@section css{
    <style>
    textarea {
        resize: none;
    }
    </style>
}
@using (Html.BeginForm("EditInterview", "Recruitment", null, FormMethod.Post, new { data_parsley_validate = "", id="frmedit" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @Html.HiddenFor(model => model.Id)

    <div class="col-md-4">
        <div class="form-group">

            <label class="control-label">Interview Name <b style="color:red;">*</b></label>
            @Html.EditorFor(model => model.InterviewName, new { htmlAttributes = new { @class = "form-control",required = "" } })
            @Html.ValidationMessageFor(model => model.InterviewName, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="col-md-4">
        <div class="form-group">

            <label class="control-label">Location <b style="color:red;">*</b></label>
            @Html.DropDownListFor(model => model.LocationId, Model.Location, htmlAttributes: new { @class = "form-control", required = "" })
            @Html.ValidationMessageFor(model => model.LocationId, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Country <b style="color:red;">*</b></label>
            @Html.EditorFor(model => model.Country, new { htmlAttributes = new { @class = "form-control", required = "" } })
            @Html.ValidationMessageFor(model => model.Country, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">State <b style="color:red;">*</b></label>
            @Html.EditorFor(model => model.State, new { htmlAttributes = new { @class = "form-control", required = "" } })
            @Html.ValidationMessageFor(model => model.State, "", new { @class = "text-danger" })
        </div>
    </div>

        <div class="col-md-4">
            <div class="form-group">

                <label class="control-label">City <b style="color:red;">*</b></label>
                @Html.EditorFor(model => model.City, new { htmlAttributes = new { @class = "form-control", required = "" } })
                @Html.ValidationMessageFor(model => model.City, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">

                <label class="control-label">Interview Type <b style="color:red;">*</b></label>
                @Html.DropDownListFor(model => model.InterviewTypeId, Model.InterviewType, htmlAttributes: new { @class = "form-control", required = "" })
                @Html.ValidationMessageFor(model => model.InterviewTypeId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">

                <label class="control-label">Status <b style="color:red;">*</b></label>
                @Html.DropDownListFor(model => model.InterviewStatusId, Model.InterviewStatus, htmlAttributes: new { @class = "form-control", @readonly = "readonly",required = "" })
                @Html.ValidationMessageFor(model => model.InterviewStatusId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">

                <label class="control-label">Interview Date <b style="color:red;">*</b></label>
                @Html.EditorFor(model => model.InterviewDate, new { htmlAttributes = new { @class = "form-control", id = "interviewdate" } })
                <div id="prevDate" style="color:blue;text-align:center;"></div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("Interview Time (optional)", htmlAttributes: new { @class = "control-label " })*@
                <label class="control-label">Interview Time <b style="color:red;">(optional)</b></label>
                @Html.EditorFor(model => model.InterviewTime, new { htmlAttributes = new { @class = "form-control", type = "time" } })
                <div id="prevTime" style="color:blue;text-align:center;"></div>
            </div>
        </div>

        <div class="pull-right" style="clear:both;">
            <button type="submit" class="btn btn-success" id="submit">Update!</button>
            <br />
        </div>
}

                <div style="clear:both;">
                    @Html.ActionLink("Back to List", "AllInterview", "Recruitment", null, new { @class = "btn btn-info pull-left" })
                    <div id="time" style="color:blue;text-align:center;" class="hidden">@aa.ToString()</div>
                </div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
    window.onload =
    function() {
        var interviewDate = $('#interviewdate').val();
        $('#interviewdate').removeAttr("data-val-required");
        $('#interviewdate').removeAttr("data-val-date");
        $('#interviewdate').removeAttr("data-val");
        $('#interviewdate').removeClass("input-validation-error");
        console.log(interviewDate);
        var realDate = interviewDate.substr(0, 10);
        //var splitedDate = realDate.split('/');
        //console.log(splitedDate);
        //console.log(splitedDate[1]);
        //var date = new Date(realDate)
        //console.log(date);

        $('#interviewdate').val(realDate);
        $('#interviewdate').attr("type", "date");

        $('#prevDate')[0].innerHTML ="Previous Date: " + "<b style='color:red'>"+ realDate + "</b>"  + " If unchanged please select same date";
        //window.onLoad = EditInterviewDate();
        var time = $('#time')[0].innerText;
        $('#prevTime')[0].innerHTML = `Previous Time:<b style='color:red'> ${time} </b> If unchanged please leave empty`;
        console.log($('#maindate'));
    }
    $('#frmedit').on('submit', function () {
        $('#interviewdate').removeAttr("data-val-required");
        $('#interviewdate').removeAttr("data-val-date");
        $('#interviewdate').removeAttr("data-val");
        $('#interviewdate').removeClass("input-validation-error");

    })
    //Remember to make the Time and date bold and red
    </script>
}
