@model IEnumerable<resourceEdge.Domain.Entities.Departments>

@{
    Layout = "~/Views/Shared/Layouts/_HrLayout.cshtml";
    string deptHead = null;
}
@section css{

    @Styles.Render("~/asset/tablecss");
}
<table class="table table-striped table-responsive table-bordered">
    <tr>
        <td>
            <p>
                @Html.ActionLink("Add Department", "addDepartment", "Configuration", null, new {@class = "btn btn-info pull-right" })
            </p>
        </td>
      
    </tr>
    <tr>
        <td>
            <table class="table table-striped table-responsive table-bordered" id="tblGeneral"> 
                <thead>
                <tr>
                    <th>Business Unit</th>
                    <th>
                      Department Name
                    </th>
                    <th>
                      Department Code
                    </th>
                    <th>
                       Department Head
                    </th>
                    <th></th>
                </tr>

                </thead>
                <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @item.BusinessUnits.unitname
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.deptname)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.deptcode)
                        </td>
                         @{
                             if (item.depthead != null)
                             {
                                 deptHead = resourceEdge.webUi.Infrastructure.UserManagement.getEmployeeIdFromUserTable(item.depthead).UserfullName;
                             }
                             }
                            
                        <td>
                            @if (deptHead != null)
                            {
                                <span>@deptHead</span>
                            }
                            else
                            {
                               <span>Un-assigned</span> 
                            }
                        </td>

                        <td>
                            @Html.ActionLink("Edit", "EditDepartment", new { id = item.Id }, new { @class = "btn btn-warning"})
                        </td>
                    </tr>
                }

                </tbody>

            </table>
        </td>
    </tr>
</table>


@section Scripts{
    @Scripts.Render("~/assets/Table");
    <script src="~/Scripts/Pages/JS/DataTableInitialization.js"></script>
}

