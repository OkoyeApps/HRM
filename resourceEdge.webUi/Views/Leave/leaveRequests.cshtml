@model IEnumerable<resourceEdge.webUi.Models.SystemModel.LeaveRequestListItem>

@{
    ViewBag.Title = "AllLeaveRequest";
    Layout = "~/Views/Shared/Layouts/_EmployeeLayout.cshtml";
    int no = 1;
}

@section css{
    <link href="~/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />

}

@if (Model.Count() > 0)
{
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            @*<div class="portlet light bordered">
                <div class="portlet-body">
                    <div class="table-container">*@
                        <table class="table table-responsive table-striped table-bordered table-hover table-checkable" id="sample_3">
                            <thead>
                                <tr>
                                    <th>S/N</th>
                                    <th>Name</th>
                                    <th>Unit</th>
                                    <th>
                                        Reason
                                    </th>
                                    <th>
                                        Leave Type
                                    </th>
                                    <th class="">
                                        From
                                    </th>
                                    <th class="">
                                        To
                                    </th>
                                    <th class="">
                                        Request Days
                                    </th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody class="green portlet-body">
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@{int sn = no++;} @sn</td>
                                        <td>@item.FullName</td>
                                        <td>@item.UnitName</td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Reason)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.LeaveName)
                                        </td>
                                        <td>
                                            @item.From.ToShortDateString()
                                        </td>
                                        <td>
                                            @item.To.ToShortDateString()
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.RequestDays)
                                        </td>

                                        <td>
                                            <table>
                                                <tr>
                                                    <td>
                                                        @using (Html.BeginForm("ApproveLeave", "Leave", new { returnUrl = Request.Url.PathAndQuery, userId = item.UserId, id = item.Id }, FormMethod.Post))
                                                        {
                                                            @Html.AntiForgeryToken() 
                                                            <input type="submit" value="Approve" class="btn btn-sm btn-success" /> <span></span>
                                                        }
                                                    
                                                    </td>
                                                    
                                                    <td>
                                                        @using (Html.BeginForm("DenyLeave", "Leave", new { returnUrl = Request.Url.PathAndQuery, userId = item.UserId, id = item.Id }, FormMethod.Post))
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <input type="submit" value="Deny" class="btn btn-sm btn-danger" />
                                                        }

                                                    </td>
                                                </tr>
                                            </table>
                                        </td>

                                    </tr>
                                            }
                            </tbody>
                        </table>
                    </div>
                </div>
            @*</div>
        </div>
    </div>*@

                                            }
                                            else
                                            {
                                                <div class="alert alert-success">
                                                    <p style="font-family: Arial, Helvetica, sans-serif; font-weight: 100; text-align : center">No pending leave available</p>
                                                </div>
                                            }


@section Scripts {
    <script src="~/assets/pages/CustomEdge/JS/DataTableButton.js" type="text/javascript"></script>

}
