@model IEnumerable<resourceEdge.Domain.Entities.Employees>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/mainlayout2.cshtml";
    List<resourceEdge.Domain.Entities.Employees> allEmployees = Model.ToList();
    
}

@section css{
    <link href="~/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
}
<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>


<div class="row">
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-dark">
                    <i class="icon-user font-dark"></i>
                    <span class="caption-subject bold uppercase">EMPLOYEES</span>
                </div>

                <div class="actions">
                    <div class="btn-group">
                        <a class="btn dark btn-outline btn-circle btn-sm" href="javascript:;" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            Actions
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu pull-right" id="sample_3_tools">
                            <li>
                                <a href="javascript:;" data-action="0" class="tool-action">
                                    <i class="icon-printer"></i> Print
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-action="1" class="tool-action">
                                    <i class="icon-check"></i> Copy
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-action="2" class="tool-action">
                                    <i class="icon-doc"></i> PDF
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-action="3" class="tool-action">
                                    <i class="icon-paper-clip"></i> Excel
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;" data-action="4" class="tool-action">
                                    <i class="icon-cloud-upload"></i> CSV
                                </a>
                            </li>
                            <li class="divider"> </li>
                        </ul>
                    </div>
                </div>
            </div>

                        <table class="table table-responsive table-striped table-bordered table-hover table-checkable" id="sample_3">
                            <tr class="row">
                                <th class="col-md-2" >
                                    Email
                                </th>
                                <th>
                                    Full Name
                                </th>
                                <th>
                                    Entry Date
                                </th>
                                <th>
                                    Exit Date
                                </th>
                                <th>
                                    Report Manager
                                </th>
                                <th>
                                    Business Unit
                                </th>
                                <th>
                                    Department
                                </th>
                                <th>
                                    Office Number
                                </th>

                                <th></th>
                            </tr>

                            @foreach (var item in Model)
                            {
                                var currentEmployee = allEmployees.Find(x => x.userId == item.userId);
                                var reportManager = item.Departments.BusinessUnits.ReportManager.Where(x => x.businessunitId == item.businessunitId && x.IsUnithead == true).SingleOrDefault();
                                
                                <tbody class="portlet-body">
           <tr class="row">
                                        <td>
                                            @Html.DisplayFor(modelItem => item.empEmail)
                                        </td>
                                        <td>
                                            @item.FullName
                                        </td>
                                        <td>
                                            @item.dateOfJoining.Value.ToShortDateString()
                                        </td>
                                        <td>
                                            @item.dateOfLeaving.Value.ToShortDateString()
                                        </td>
                                        <td>
                                            @reportManager
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Departments.BusinessUnits.unitname)
                                        </td>
                                        <td>
                                            @item.Departments.deptname
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.officeNumber)
                                        </td>

                                        <td>
                                            @Html.ActionLink("Edit", "Edit", new { id = item.empID }) |
                                            @Html.ActionLink("Details", "Details", new { id = item.empID, returnUrl = Request.Url.PathAndQuery }) |
                                            @Html.ActionLink("Delete", "Delete", new { id = item.empID })
                                        </td>
                                    </tr>
                                </tbody>
                            }

                        </table>
                    </div>
                </div>
            </div>

                        @section Plugins{
                            <script src="~/assets/global/plugins/bootstrap-tabdrop/js/bootstrap-tabdrop.js" type="text/javascript"></script>
                            <script src="~/assets/global/scripts/datatable.js" type="text/javascript"></script>
                            <script src="~/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
                            <script src="~/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
                        }
                        @section Scripts{
<script src="~/assets/pages/scripts/table-datatables-buttons.js"></script>
                            @*<script src="~/assets/pages/scripts/table-datatables-managed.min.js" type="text/javascript"></script>*@
                        }
